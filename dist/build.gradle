description = 'Create distribution zipfiles'

task zipCli(type: Zip) {
    println "Jar name: ../ctk-cli/build/libs/ctk-cli-${version}.jar"
    baseName = 'ga4gh-ctk-cli'
    into('lib') {
       from '../ctk-testrunner/src/main/resources/antRunTests.xml'
       from '../ctk-cli/build/resources/main/log4j2.xml'
       from "../cts-java/build/libs/cts-java-${version}-tests.jar"
    }
    from '../ctk-cli/build/resources/main/ctk'
    from '../docs/README-IntroAtCommandLine.txt'
    from '../ctk-cli/build/resources/main/application.properties'
    from "../ctk-cli/build/libs/ctk-cli-${version}.jar"
}

task zipServer(type: Zip) {
    baseName = 'ga4gh-ctk-server'
    into('lib') {
       from '../ctk-testrunner/src/main/resources/antRunTests.xml'
       from '../ctk-server/build/resources/main/log4j2.xml'
       from "../cts-java/build/libs/cts-java-${version}-tests.jar"
    }
    from '../ctk-server/build/resources/main/ctk'
    from '../docs/README-Server.txt'
    from '../ctk-server/build/resources/main/application.properties'
    from "../ctk-server/build/libs/ctk-server-${version}.jar"
}

task createDists(dependsOn:['zipCli', 'zipServer'])
